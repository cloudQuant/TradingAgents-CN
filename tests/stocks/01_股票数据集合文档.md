# 股票数据集合文档

## 概述

本文档参考 tests/funds 中基金数据集合的实现，为股票数据接口设计数据集合功能。

**根据 AKShare 股票数据接口，共规划 365 个数据集合。**

所有需求文档已自动生成到 `requirements/` 目录下。

## 数据源

数据主要来源于：
- 东方财富网（东财）
- 雪球网
- 新浪财经
- 腾讯财经
- 百度股市通
- 同花顺
- 上海证券交易所
- 深圳证券交易所
- 北京证券交易所
- 巨潮资讯
- 乐咕乐股
- 富途牛牛
- 经济通

## 数据集合完整列表（共365个）

已创建的核心需求文档（前6个）：
- `02_个股信息查询-东财.md` - stock_individual_info_em
- `03_个股信息查询-雪球.md` - stock_individual_basic_info_xq
- `04_沪深京A股实时行情-东财.md` - stock_zh_a_spot_em
- `05_A股历史行情-东财.md` - stock_zh_a_hist
- `06_A股分时数据-东财.md` - stock_zh_a_hist_min_em

其余359个接口的需求文档已批量生成到 `requirements/` 目录。

### 接口分类总览

所有365个接口按功能分类如下：

| 分类 | 接口数量 | 说明 |
|------|---------|------|
| 市场总貌与统计 | 8 | 交易所市场总貌、地区交易排序、新高新低统计等 |
| 个股信息与基础数据 | 22 | 个股基本信息、代码列表、公司概况、主营业务等 |
| 实时行情数据 | 23 | A股/B股/港股/美股实时行情、各板块行情等 |
| 历史行情数据 | 15 | 各市场历史行情、不同数据源（东财、新浪、腾讯）|
| 分时数据 | 11 | 各市场分时数据、日内分时、盘前数据等 |
| 财务数据 | 50 | 三大报表、财务指标、业绩数据、估值指标等 |
| 股东数据 | 40 | 十大股东、持股分析、股权质押、董监高持股等 |
| 新股数据 | 20 | 新股发行、申购、IPO审核、增发配股等 |
| 资金流向 | 20 | 个股/行业/概念资金流、主力资金、沪深港通等 |
| 板块数据 | 17 | 概念板块、行业板块、板块成分股、板块资金流等 |
| 龙虎榜数据 | 15 | 龙虎榜详情、机构席位、营业部排行等 |
| 分红配股 | 10 | 历史分红、分红配送、分红派息等 |
| 大宗交易 | 7 | 每日明细、市场统计、活跃A股统计等 |
| 融资融券 | 7 | 融资融券汇总/明细、标的证券信息等 |
| 公告与信息披露 | 10 | 沪深京A股公告、信息披露报告等 |
| 研究报告 | 5 | 个股研报、盈利预测、投资评级等 |
| 限售解禁 | 5 | 解禁批次、解禁股东、解禁详情等 |
| 停复牌 | 3 | 停复牌信息、暂停/终止上市等 |
| 股票回购 | 1 | 股票回购数据 |
| 行业分类 | 3 | 行业分类数据、行业归属变动等 |
| 热度与人气 | 15 | 人气榜、关注排行、热搜股票等 |
| 涨停板相关 | 8 | 涨停股池、强势股池、炸板/跌停股池等 |
| 技术选股 | 7 | 持续放量/缩量、向上/下突破、量价齐升/跌等 |
| ESG评级 | 5 | ESG评级数据、MSCI、路孚特、秩鼎、华证指数 |
| 估值指标 | 8 | A股/港股估值、市盈率、市净率、股息率等 |
| 其他特色数据 | 30+ | 商誉、重大合同、券商业绩、对外担保等 |

**合计：365个接口**

详细的接口列表和说明请查看：
- `interface_list.txt` - 完整接口分类列表
- `requirements/README.md` - 需求文档目录说明
- `requirements/` 目录下的各个需求文档

## 实现原则

1. **测试驱动开发**：先编写测试用例，再实现功能
2. **参考基金实现**：前端和后端实现参考 `bond_info_cm` 的设计
3. **统一界面风格**：包含数据概览、数据列表、刷新、清空数据、更新数据等功能
4. **数据更新策略**：
   - 支持文件导入
   - 支持远程同步
   - 根据数据量决定是否需要批量更新
   - 支持单个更新（针对个股数据）
5. **数据可视化**：根据数据特点增加图形展示

## 验收标准

1. 测试用例全部通过
2. 手动测试无异常
3. 界面美观、功能完整
4. 数据准确性验证

## 开发顺序建议

建议按以下优先级开发：

**第一阶段**（核心功能）：
1. 个股信息查询-东财
2. 个股信息查询-雪球
3. 沪深京A股实时行情-东财
4. A股历史行情-东财

**第二阶段**（实时行情扩展）：
5. 沪A股实时行情-东财
6. 深A股实时行情-东财
7. 创业板实时行情-东财
8. 科创板实时行情-东财

**第三阶段**（分时数据）：
9. A股分时数据-东财
10. 日内分时数据-东财
11. A股分时数据-新浪

**第四阶段**（特殊板块和其他数据源）：
12. 实时行情数据-新浪
13. 个股实时行情-雪球
14. 新股实时行情-东财
15. 风险警示板-东财
16. 次新股-新浪

**第五阶段**（其他板块）：
17. B股数据
18. A+H股数据
19. 市场总貌数据

## 注意事项

1. **数据唯一标识**：
   - 实时行情：以股票代码和日期作为唯一标识
   - 历史行情：以股票代码和日期作为唯一标识
   - 分时数据：以股票代码和时间作为唯一标识

2. **数据更新策略**：
   - 小数据量（<1000条）：一次性更新全部
   - 大数据量（>1000条）：需要批量更新功能

3. **错误处理**：
   - API限流处理
   - 网络异常重试
   - 数据验证

4. **性能优化**：
   - 批量插入/更新
   - 索引优化
   - 分页查询
