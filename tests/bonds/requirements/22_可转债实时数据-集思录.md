### 背景
集思录是可转债投资者重要的数据平台，提供了丰富的可转债实时数据和分析指标。

### 任务

建立可转债实时数据（集思录）集合，获取集思录的可转债实时数据。

### 步骤
1. 数据集合：创建一个新的数据集合，名称为**可转债实时数据-集思录** (http://localhost:3000/bonds/collections/bond_cb_jsl)
2. 页面功能：数据概览、数据列表、实时刷新
3. 更新数据功能：
   - **实时更新**：支持定时自动刷新
   - **全量获取**：一次性获取所有可转债数据
   - **Cookie配置**：支持配置集思录Cookie获取完整数据
4. 数据唯一标识：以**代码**作为唯一标识

### 测试驱动
1. 测试用例文件：`tests/bonds/collections/22_bond_cb_jsl_collection.py`

### 验收标准
1. 测试用例能够全部通过
2. 支持Cookie配置功能

### 获取数据的API接口、字段等

#### 可转债实时数据-集思录

**接口**: `bond_cb_jsl`

**目标地址**: https://www.jisilu.cn/data/cbnew/#cb

**描述**: 集思录可转债实时数据，包含行情数据（涨跌幅，成交量和换手率等）及可转债基本信息（转股价，溢价率和到期收益率等）

**限量**: 单次返回当前交易时刻的所有数据

**输入参数**

| 名称     | 类型  | 描述                                                 |
|--------|-----|----------------------------------------------------|
| cookie | str | cookie=''; 此处输入您的集思录 cookie 就可以获取完整数据，否则只能返回前 30 条 |

**注意**: 
1. 需要查看的链接为：https://app.jisilu.cn/data/cbnew/
2. 需要复制浏览器的 Cookie
3. 参考文章：[如何拿到集思录的可转债实时数据](https://zhuanlan.zhihu.com/p/607755294)

**输出参数**

| 名称     | 类型      | 描述       |
|--------|---------|----------|
| 代码     | object  | -        |
| 转债名称   | object  | -        |
| 现价     | float64 | -        |
| 涨跌幅    | float64 | 注意单位: %  |
| 正股代码   | object  | -        |
| 正股名称   | object  | -        |
| 正股价    | float64 | -        |
| 正股涨跌   | float64 | 注意单位: %  |
| 正股PB   | float64 | -        |
| 转股价    | float64 | -        |
| 转股价值   | float64 | -        |
| 转股溢价率  | float64 | 注意单位: %  |
| 债券评级   | object  | -        |
| 回售触发价  | float64 | -        |
| 强赎触发价  | float64 | -        |
| 转债占比   | float64 | 注意单位: %  |
| 到期时间   | object  | -        |
| 剩余年限   | float64 | -        |
| 剩余规模   | float64 | 注意单位: 亿元 |
| 成交额    | float64 | 注意单位: 万元 |
| 换手率    | float64 | 注意单位: %  |
| 到期税前收益 | float64 | 注意单位: %  |
| 双低     | float64 | -        |

**接口示例**

```python
import akshare as ak

bond_cb_jsl_df = ak.bond_cb_jsl(cookie="您的集思录 cookie")
print(bond_cb_jsl_df)
```

**数据示例**

```
    代码   转债名称      现价    涨跌幅  ...    成交额    换手率  到期税前收益  双低
0   404004   汇车退债   41.318 -18.13  ...     985.32     1.02  124.58   23.96
1   123174   精锻转债  171.157   9.82  ...  619050.35   571.01   -9.27  167.83
...
[30 rows x 23 columns]
```

### 实现要点

1. **后端实现**：
   - 实现集思录数据获取
   - 实现Cookie管理
   - 实现数据获取限制提示（无Cookie时只能获取30条）

2. **前端实现**：
   - Cookie配置界面
   - 数据完整性提示
   - 集思录特有指标展示（双低、到期税前收益等）
   - 数据可视化：
     - 双低策略排名
     - 到期收益率分布
     - 转债占比分析

3. **数据模型**：
   ```python
   {
       "代码": str,
       "转债名称": str,
       "现价": float,
       "涨跌幅": float,
       "正股代码": str,
       "正股名称": str,
       "正股价": float,
       "正股涨跌": float,
       "正股PB": float,
       "转股价": float,
       "转股价值": float,
       "转股溢价率": float,
       "债券评级": str,
       "回售触发价": float,
       "强赎触发价": float,
       "转债占比": float,
       "到期时间": str,
       "剩余年限": float,
       "剩余规模": float,
       "成交额": float,
       "换手率": float,
       "到期税前收益": float,
       "双低": float,
       "更新时间": datetime,
       "数据来源": "jisilu"
   }
   ```

4. **注意事项**：
   - Cookie配置需要安全存储
   - Cookie过期需要提示用户更新
   - 无Cookie时只能获取前30条数据

### 扩展功能（可选）

1. Cookie自动管理
2. 双低策略筛选和排名
3. 到期收益率分析
4. 与其他数据源对比
5. 集思录特有指标分析

---

## ✅ 实现状态

**状态**: ✅ 已完成后端实现

**完成时间**: 2024-11-23

**实现内容**:
- ✅ 后端服务层实现：`save_bond_cov_jsl()` 和 `query_bond_cov_jsl()`
- ✅ 数据库索引：代码唯一索引
- ✅ API端点实现：
  - `GET /api/bonds/cov-jsl` - 查询可转债实时数据（集思录）
  - `POST /api/bonds/cov-jsl/refresh` - 刷新可转债实时数据

**完成率：22/32 = 68.75%** 🎉
