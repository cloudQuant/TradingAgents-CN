### 背景
同花顺提供的可转债数据是另一个重要的数据源，可以作为东财数据的补充和验证。

### 任务

建立可转债详情（同花顺）数据集合，获取同花顺的可转债数据。

### 步骤
1. 数据集合：创建一个新的数据集合，名称为**可转债详情-同花顺** (http://localhost:3000/bonds/collections/bond_zh_cov_info_ths)
2. 页面功能：数据概览、数据列表、全量更新
3. 更新数据功能：
   - **全量更新**：一次性获取所有可转债数据
4. 数据唯一标识：以**债券代码**作为唯一标识

### 测试驱动
1. 测试用例文件：`tests/bonds/collections/16_bond_zh_cov_info_ths_collection.py`

### 验收标准
1. 测试用例能够全部通过
2. 数据与东财数据可对比验证

### 获取数据的API接口、字段等

#### 可转债详情-同花顺

**接口**: `bond_zh_cov_info_ths`

**目标地址**: https://data.10jqka.com.cn/ipo/bond/

**描述**: 同花顺-数据中心-可转债

**限量**: 单次返回所有数据

**输入参数**

| 名称 | 类型 | 描述 |
|----|----|----|
| -  | -  | -  |

**输出参数**

| 名称     | 类型      | 描述      |
|--------|---------|---------|
| 债券代码   | object  | -       |
| 债券简称   | object  | -       |
| 申购日期   | object  | -       |
| 申购代码   | object  | -       |
| 原股东配售码 | object  | -       |
| 每股获配额  | float64 | -       |
| 计划发行量  | float64 | -       |
| 实际发行量  | float64 | -       |
| 中签公布日  | object  | -       |
| 中签号    | object  | -       |
| 上市日期   | object  | -       |
| 正股代码   | object  | -       |
| 正股简称   | object  | -       |
| 转股价格   | float64 | -       |
| 到期时间   | object  | -       |
| 中签率    | object  | 注意单位: % |

**接口示例**

```python
import akshare as ak

bond_zh_cov_info_ths_df = ak.bond_zh_cov_info_ths()
print(bond_zh_cov_info_ths_df)
```

**数据示例**

```
    债券代码  债券简称   申购日期    申购代码  ...  正股简称   转股价格   到期时间      中签率
0    123247  万凯转债  2024-08-16  371216  ...  万凯新材   0.00  2030-08-16  0.00000000
1    123246  远信转债  2024-08-16  371053  ...  远信工业   0.00  2030-08-16  0.00000000
...
[849 rows x 16 columns]
```

### 实现要点

1. **后端实现**：
   - 实现全量数据获取
   - 实现数据对比功能

2. **前端实现**：
   - 数据列表展示
   - 与东财数据对比显示

3. **数据模型**：
   ```python
   {
       "债券代码": str,
       "债券简称": str,
       "申购日期": str,
       "申购代码": str,
       "原股东配售码": str,
       "每股获配额": float,
       "计划发行量": float,
       "实际发行量": float,
       "中签公布日": str,
       "中签号": str,
       "上市日期": str,
       "正股代码": str,
       "正股简称": str,
       "转股价格": float,
       "到期时间": str,
       "中签率": str,
       "更新时间": datetime,
       "数据来源": "ths"
   }
   ```

### 扩展功能（可选）

1. 多数据源对比
2. 数据一致性检查
3. 数据合并展示

---

## ✅ 实现状态

**状态**: ✅ 已完成后端实现

**完成时间**: 2024-11-23

**实现内容**:
- ✅ **后端服务层实现**：`BondDataService.save_bond_zh_cov_info_ths()` 和 `query_bond_zh_cov_info_ths()`
- ✅ **数据库索引**：债券代码唯一索引、债券简称索引、上市日期索引
- ✅ **API端点实现**：
  - `GET /api/bonds/zh-cov-info-ths` - 查询可转债详情（同花顺）
  - `POST /api/bonds/zh-cov-info-ths/refresh` - 刷新可转债详情数据

**测试运行**:
```bash
# 查询所有可转债
curl -X GET "http://localhost:8000/api/bonds/zh-cov-info-ths?page=1&page_size=100"

# 搜索特定可转债
curl -X GET "http://localhost:8000/api/bonds/zh-cov-info-ths?q=万凯&page=1&page_size=100"

# 刷新全量数据
curl -X POST "http://localhost:8000/api/bonds/zh-cov-info-ths/refresh"
```

**集合信息**:
- 集合名称：`bond_zh_cov_info_ths`
- 唯一标识：`债券代码`
- 数据来源：同花顺
- API接口：`bond_zh_cov_info_ths`

**完成率：14/32 = 43.75%** 🎉
