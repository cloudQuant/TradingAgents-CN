### 背景
可转债等权指数反映了可转债市场的整体走势，是市场分析的重要指标。

### 任务

建立可转债等权指数数据集合，获取集思录的可转债等权指数历史数据。

### 步骤
1. 数据集合：创建一个新的数据集合，名称为**可转债等权指数-集思录** (http://localhost:3000/bonds/collections/bond_cb_index_jsl)
2. 页面功能：数据概览、指数走势图、指数分析
3. 更新数据功能：
   - **全量更新**：获取所有历史数据
   - **增量更新**：只更新最近的数据
4. 数据唯一标识：以**日期**作为唯一标识

### 测试驱动
1. 测试用例文件：`tests/bonds/collections/24_bond_cb_index_jsl_collection.py`

### 验收标准
1. 测试用例能够全部通过
2. 支持指数走势图展示

### 获取数据的API接口、字段等

#### 可转债等权指数-集思录

**接口**: `bond_cb_index_jsl`

**目标地址**: https://www.jisilu.cn/web/data/cb/index

**描述**: 可转债-集思录可转债等权指数

**限量**: 单次返回所有历史数据

**输入参数**

| 名称  | 类型  | 描述  |
|-----|-----|-----|
| -   | -   | -   |

**输出参数**

| 名称                  | 类型      | 描述        |
|---------------------|---------|-----------|
| price_dt            | object  | 日期        |
| price               | float64 | 指数        |
| amount              | float64 | 剩余规模(亿元)  |
| volume              | float64 | 成交额(亿元)   |
| count               | int64   | 数量        |
| increase_val        | float64 | 涨跌        |
| increase_rt         | float64 | 涨幅        |
| avg_price           | float64 | 平均价格(元)   |
| mid_price           | float64 | 中位数价格(元)  |
| mid_convert_value   | float64 | 中位数转股价值   |
| avg_dblow           | float64 | 平均双底      |
| avg_premium_rt      | float64 | 平均溢价率     |
| mid_premium_rt      | float64 | 中位数溢价率    |
| avg_ytm_rt          | float64 | 平均收益率     |
| turnover_rt         | float64 | 换手率       |
| price_90            | int64   | >90       |
| price_90_100        | int64   | 90~100    |
| price_100_110       | int64   | 100~110   |
| price_110_120       | int64   | 110~120   |
| price_120_130       | int64   | 120~130   |
| price_130           | int64   | >130      |
| increase_rt_90      | float64 | >90涨幅     |
| increase_rt_90_100  | float64 | 90~100涨幅  |
| increase_rt_100_110 | float64 | 100~110涨幅 |
| increase_rt_110_120 | float64 | 110~120涨幅 |
| increase_rt_120_130 | float64 | 120~130涨幅 |
| increase_rt_130     | float64 | >130涨幅    |
| idx_price           | float64 | 沪深300指数   |
| idx_increase_rt     | float64 | 沪深300指数涨幅 |

**接口示例**

```python
import akshare as ak

bond_cb_index_jsl_df = ak.bond_cb_index_jsl()
print(bond_cb_index_jsl_df)
```

**数据示例**

```
        price_dt     price  ...  idx_price  idx_increase_rt
0     2017-12-29  1000.000  ...   4030.850             0.30
1     2018-01-02  1008.831  ...   4087.400             1.40
...
1150  2022-09-23  1998.653  ...   3856.021            -0.34
[1151 rows x 29 columns]
```

### 实现要点

1. **后端实现**：
   - 实现指数数据获取
   - 实现增量更新
   - 计算指数统计指标

2. **前端实现**：
   - 指数走势图
   - 价格区间分布图
   - 与沪深300对比
   - 数据可视化：
     - 指数走势图
     - 价格分布直方图
     - 溢价率走势
     - 与沪深300相关性分析

3. **数据模型**：
   ```python
   {
       "日期": str,
       "指数": float,
       "剩余规模": float,  # 亿元
       "成交额": float,    # 亿元
       "数量": int,
       "涨跌": float,
       "涨幅": float,
       "平均价格": float,
       "中位数价格": float,
       "中位数转股价值": float,
       "平均双底": float,
       "平均溢价率": float,
       "中位数溢价率": float,
       "平均收益率": float,
       "换手率": float,
       "价格分布": dict,  # 各价格区间数量
       "区间涨幅": dict,  # 各价格区间涨幅
       "沪深300指数": float,
       "沪深300涨幅": float,
       "更新时间": datetime
   }
   ```

4. **注意事项**：
   - 字段非常多，需要合理展示
   - 价格分布和区间涨幅是重要指标
   - 需要计算与沪深300的相关性

### 扩展功能（可选）

1. 指数与沪深300相关性分析
2. 指数超额收益计算
3. 市场情绪指标
4. 价格分布变化趋势
5. 指数成分变化追踪

---

## ✅ 实现状态

**状态**: ✅ 已完成后端实现

**完成时间**: 2024-11-23

**实现内容**:
- ✅ 后端服务层实现：使用通用方法 `save_generic_bond_data()` 和 `query_generic_bond_data()`
- ✅ 数据库索引：日期唯一索引
- ✅ API端点实现：
  - `GET /api/bonds/cov-index-jsl` - 查询可转债等权指数数据（集思录）
  - `POST /api/bonds/cov-index-jsl/refresh` - 刷新可转债等权指数数据

**完成率：24/32 = 75%** 🎉
