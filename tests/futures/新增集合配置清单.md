# 新增期货数据集合配置清单 (022-052)

## 需要在futures.py中添加的集合

### 1. collections列表中添加（在list_futures_collections函数中）

```python
# 022 现期图
{
    "name": "futures_spot_sys",
    "display_name": "现期图",
    "description": "生意社-商品与期货-现期图",
    "route": "/futures/collections/futures_spot_sys",
    "fields": ["日期", "主力基差", "symbol", "indicator"],
},

# 023-028 合约信息
{
    "name": "futures_contract_info_shfe",
    "display_name": "上海期货交易所",
    "description": "上海期货交易所-交易参数汇总查询",
    "route": "/futures/collections/futures_contract_info_shfe",
    "fields": ["合约代码", "上市日", "到期日", "开始交割日", "最后交割日", "挂牌基准价", "交易日", "更新时间"],
},
{
    "name": "futures_contract_info_ine",
    "display_name": "上海国际能源交易中心",
    "description": "上海国际能源交易中心-交易参数汇总",
    "route": "/futures/collections/futures_contract_info_ine",
    "fields": ["合约代码", "上市日", "到期日", "开始交割日", "最后交割日", "挂牌基准价", "交易日"],
},
{
    "name": "futures_contract_info_dce",
    "display_name": "大连商品交易所",
    "description": "大连商品交易所-合约信息",
    "route": "/futures/collections/futures_contract_info_dce",
    "fields": ["品种", "合约代码", "交易单位", "最小变动价位", "开始交易日", "最后交易日", "最后交割日"],
},
{
    "name": "futures_contract_info_czce",
    "display_name": "郑州商品交易所",
    "description": "郑州商品交易所-参考数据",
    "route": "/futures/collections/futures_contract_info_czce",
    "fields": ["产品名称", "合约代码", "产品代码", "交易单位", "最小变动价位", "交易手续费"],
},
{
    "name": "futures_contract_info_gfex",
    "display_name": "广州期货交易所",
    "description": "广州期货交易所-合约信息",
    "route": "/futures/collections/futures_contract_info_gfex",
    "fields": ["品种", "合约代码", "交易单位", "最小变动单位", "开始交易日", "最后交易日", "最后交割日"],
},
{
    "name": "futures_contract_info_cffex",
    "display_name": "中国金融期货交易所",
    "description": "中国金融期货交易所-交易参数",
    "route": "/futures/collections/futures_contract_info_cffex",
    "fields": ["合约代码", "合约月份", "挂盘基准价", "上市日", "最后交易日", "涨停板价位", "跌停板价位", "持仓限额", "品种"],
},

# 029-034 内盘行情
{
    "name": "futures_zh_spot",
    "display_name": "内盘-实时行情数据",
    "description": "新浪财经-期货实时行情",
    "route": "/futures/collections/futures_zh_spot",
    "fields": ["symbol", "time", "open", "high", "low", "current_price", "volume", "hold"],
},
{
    "name": "futures_zh_realtime",
    "display_name": "内盘-实时行情数据(品种)",
    "description": "新浪财经-期货实时行情(按品种)",
    "route": "/futures/collections/futures_zh_realtime",
    "fields": ["symbol", "exchange", "name", "trade", "open", "high", "low", "volume", "position"],
},
{
    "name": "futures_zh_minute_sina",
    "display_name": "内盘-分时行情数据",
    "description": "新浪财经-期货分时数据",
    "route": "/futures/collections/futures_zh_minute_sina",
    "fields": ["datetime", "open", "high", "low", "close", "volume", "hold"],
},
{
    "name": "futures_hist_em",
    "display_name": "内盘-历史行情数据-东财",
    "description": "东方财富网-期货历史行情",
    "route": "/futures/collections/futures_hist_em",
    "fields": ["时间", "开盘", "最高", "最低", "收盘", "涨跌", "涨跌幅", "成交量", "成交额", "持仓量"],
},
{
    "name": "futures_zh_daily_sina",
    "display_name": "内盘-历史行情数据-新浪",
    "description": "新浪财经-期货日频数据",
    "route": "/futures/collections/futures_zh_daily_sina",
    "fields": ["date", "open", "high", "low", "close", "volume", "hold", "settle"],
},
{
    "name": "get_futures_daily",
    "display_name": "内盘-历史行情数据-交易所",
    "description": "各交易所期货历史数据",
    "route": "/futures/collections/get_futures_daily",
    "fields": ["symbol", "date", "open", "high", "low", "close", "volume", "open_interest", "turnover", "settle", "pre_settle", "variety"],
},

# 035-040 外盘期货
{
    "name": "futures_hq_subscribe_exchange_symbol",
    "display_name": "外盘-品种代码表",
    "description": "新浪财经-外盘期货品种代码表",
    "route": "/futures/collections/futures_hq_subscribe_exchange_symbol",
    "fields": ["symbol", "code"],
},
{
    "name": "futures_foreign_commodity_realtime",
    "display_name": "外盘-实时行情数据",
    "description": "新浪财经-外盘商品期货实时数据",
    "route": "/futures/collections/futures_foreign_commodity_realtime",
    "fields": ["名称", "最新价", "人民币报价", "涨跌额", "涨跌幅", "开盘价", "最高价", "最低价", "持仓量"],
},
{
    "name": "futures_global_spot_em",
    "display_name": "外盘-实时行情数据-东财",
    "description": "东方财富网-国际期货实时行情",
    "route": "/futures/collections/futures_global_spot_em",
    "fields": ["序号", "代码", "名称", "最新价", "涨跌额", "涨跌幅", "今开", "最高", "最低", "成交量", "持仓量"],
},
{
    "name": "futures_global_hist_em",
    "display_name": "外盘-历史行情数据-东财",
    "description": "东方财富网-国际期货历史行情",
    "route": "/futures/collections/futures_global_hist_em",
    "fields": ["日期", "代码", "名称", "开盘", "最新价", "最高", "最低", "总量", "涨幅", "持仓", "日增"],
},
{
    "name": "futures_foreign_hist",
    "display_name": "外盘-历史行情数据-新浪",
    "description": "新浪财经-外盘期货历史行情",
    "route": "/futures/collections/futures_foreign_hist",
    "fields": ["date", "open", "high", "low", "close", "volume"],
},
{
    "name": "futures_foreign_detail",
    "display_name": "外盘-合约详情",
    "description": "新浪财经-外盘期货合约详情",
    "route": "/futures/collections/futures_foreign_detail",
    "fields": ["交易品种", "最小变动价位", "交易时间", "交易代码", "交易单位", "上市交易所"],
},

# 041-046 连续合约与指数
{
    "name": "futures_settlement_price_sgx",
    "display_name": "新加坡交易所期货",
    "description": "新加坡交易所-历史结算价格",
    "route": "/futures/collections/futures_settlement_price_sgx",
    "fields": ["DATE", "COM", "COM_MM", "COM_YY", "OPEN", "HIGH", "LOW", "CLOSE", "SETTLE", "VOLUME", "OINT"],
},
{
    "name": "futures_main_sina",
    "display_name": "期货连续合约",
    "description": "新浪财经-主力连续合约历史数据",
    "route": "/futures/collections/futures_main_sina",
    "fields": ["日期", "开盘价", "最高价", "最低价", "收盘价", "成交量", "持仓量", "动态结算价"],
},
{
    "name": "futures_contract_detail",
    "display_name": "期货合约详情-新浪",
    "description": "新浪财经-期货合约详情",
    "route": "/futures/collections/futures_contract_detail",
    "fields": ["item", "value"],
},
{
    "name": "futures_contract_detail_em",
    "display_name": "期货合约详情-东财",
    "description": "东方财富-期货合约详情",
    "route": "/futures/collections/futures_contract_detail_em",
    "fields": ["item", "value"],
},
{
    "name": "futures_index_ccidx",
    "display_name": "中证商品指数",
    "description": "中证商品指数数据",
    "route": "/futures/collections/futures_index_ccidx",
    "fields": ["日期", "指数代码", "收盘点位", "结算点位", "涨跌", "涨跌幅"],
},
{
    "name": "futures_spot_stock",
    "display_name": "现货与股票",
    "description": "东方财富网-现货与股票",
    "route": "/futures/collections/futures_spot_stock",
    "fields": ["商品名称", "最新价", "近半年涨跌幅", "生产商", "下游用户"],
},

# 047-052 生猪与资讯
{
    "name": "futures_comex_inventory",
    "display_name": "COMEX 库存数据",
    "description": "东方财富网-COMEX库存数据",
    "route": "/futures/collections/futures_comex_inventory",
    "fields": ["序号", "日期", "库存量"],
},
{
    "name": "futures_hog_core",
    "display_name": "核心数据",
    "description": "玄田数据-核心数据",
    "route": "/futures/collections/futures_hog_core",
    "fields": ["date", "value", "symbol"],
},
{
    "name": "futures_hog_cost",
    "display_name": "成本维度",
    "description": "玄田数据-成本维度",
    "route": "/futures/collections/futures_hog_cost",
    "fields": ["date", "value", "symbol"],
},
{
    "name": "futures_hog_supply",
    "display_name": "供应维度",
    "description": "玄田数据-供应维度",
    "route": "/futures/collections/futures_hog_supply",
    "fields": ["date", "value", "symbol"],
},
{
    "name": "index_hog_spot_price",
    "display_name": "生猪市场价格指数",
    "description": "行情宝-生猪市场价格指数",
    "route": "/futures/collections/index_hog_spot_price",
    "fields": ["日期", "指数", "4个月均线", "6个月均线", "12个月均线", "预售均价", "成交均价", "成交均重"],
},
{
    "name": "futures_news_shmet",
    "display_name": "期货资讯",
    "description": "上海金属网-快讯",
    "route": "/futures/collections/futures_news_shmet",
    "fields": ["发布时间", "内容"],
},
```

## 需要添加到collection_map的映射（共31个新集合）

需要在以下3个地方添加：
1. get_futures_collection_data 函数中的 collection_map
2. get_futures_collection_stats 函数中的 collection_map  
3. update_futures_collection 函数中添加更新逻辑

## 需要实现的update任务函数（共31个）

每个集合需要一个对应的 update_*_task 异步函数

## 实施计划

由于文件过大，分3个步骤完成：
1. 步骤1：添加所有集合定义到collections列表
2. 步骤2：添加所有集合映射到collection_map
3. 步骤3：实现所有update逻辑和任务函数
