# å€ºåˆ¸æ•°æ®ä¸“ä¸šåŒ–å±•ç¤ºä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“Š ä¸€ã€AKShareå€ºåˆ¸æ¥å£åˆ†æ

### 1.1 æ ¸å¿ƒæ¥å£åˆ†ç±»

#### A. å€ºåˆ¸åŸºç¡€ä¿¡æ¯ç±»
| æ¥å£åç§° | æ•°æ®æº | æ ¸å¿ƒå­—æ®µ | æ›´æ–°é¢‘ç‡ | ç”¨é€” |
|---------|--------|---------|---------|------|
| `bond_info_cm` | ä¸­å›½å¤–æ±‡äº¤æ˜“ä¸­å¿ƒ | å€ºåˆ¸ç®€ç§°ã€ä»£ç ã€å‘è¡Œäººã€ç±»å‹ã€è¯„çº§ | å®æ—¶ | å€ºåˆ¸æŸ¥è¯¢å’Œç­›é€‰ |
| `bond_info_detail_cm` | ä¸­å›½å¤–æ±‡äº¤æ˜“ä¸­å¿ƒ | 64ä¸ªè¯¦ç»†å­—æ®µ | å®æ—¶ | å€ºåˆ¸è¯¦æƒ…å±•ç¤º |
| `bond_zh_hs_spot` | æ–°æµªè´¢ç» | å®æ—¶è¡Œæƒ…ï¼ˆä»·æ ¼ã€æ¶¨è·Œã€æˆäº¤é‡ï¼‰ | å®æ—¶ | å®æ—¶è¡Œæƒ…ç›‘æ§ |
| `bond_zh_hs_daily` | æ–°æµªè´¢ç» | æ—¥çº¿OHLCVæ•°æ® | æ—¥é¢‘ | å†å²èµ°åŠ¿åˆ†æ |

#### B. å¯è½¬å€ºä¸“é¡¹ç±»
| æ¥å£åç§° | æ•°æ®æº | æ ¸å¿ƒå­—æ®µ | æ›´æ–°é¢‘ç‡ | ç”¨é€” |
|---------|--------|---------|---------|------|
| `bond_zh_hs_cov_spot` | æ–°æµªè´¢ç» | 15ä¸ªå®æ—¶å­—æ®µ | å®æ—¶ | å¯è½¬å€ºå®æ—¶è¡Œæƒ… |
| `bond_zh_hs_cov_daily` | æ–°æµªè´¢ç» | OHLCV | æ—¥é¢‘ | å¯è½¬å€ºå†å²æ•°æ® |
| `bond_zh_cov` | ä¸œæ–¹è´¢å¯Œ | ç”³è´­ä¿¡æ¯ã€è½¬è‚¡ä»·ã€æº¢ä»·ç‡ | æ—¥é¢‘ | å¯è½¬å€ºæ‰“æ–°å’Œåˆ†æ |
| `bond_cov_comparison` | ä¸œæ–¹è´¢å¯Œ | è½¬è‚¡ä»·å€¼ã€æº¢ä»·ç‡ã€è§¦å‘ä»· | å®æ—¶ | å¯è½¬å€ºæ¯”ä»· |
| `bond_zh_cov_info` | ä¸œæ–¹è´¢å¯Œ | åŸºæœ¬ä¿¡æ¯ã€ä¸­ç­¾å·ã€é‡è¦æ—¥æœŸ | é™æ€ | è¯¦æƒ…æŸ¥è¯¢ |
| `bond_zh_cov_value_analysis` | ä¸œæ–¹è´¢å¯Œ | çº¯å€ºä»·å€¼ã€è½¬è‚¡ä»·å€¼ã€æº¢ä»·ç‡ | æ—¥é¢‘ | ä»·å€¼åˆ†æ |

#### C. å¸‚åœºç»Ÿè®¡ç±»
| æ¥å£åç§° | æ•°æ®æº | æ ¸å¿ƒå­—æ®µ | æ›´æ–°é¢‘ç‡ | ç”¨é€” |
|---------|--------|---------|---------|------|
| `bond_cash_summary_sse` | ä¸Šäº¤æ‰€ | æ‰˜ç®¡å¸‚å€¼ã€æ‰˜ç®¡é¢å€¼ã€åˆ†ç±»ç»Ÿè®¡ | æ—¥é¢‘ | å¸‚åœºæ¦‚è§ˆ |
| `bond_deal_summary_sse` | ä¸Šäº¤æ‰€ | æˆäº¤ç¬”æ•°ã€æˆäº¤é‡‘é¢ | æ—¥é¢‘ | æˆäº¤ç»Ÿè®¡ |
| `bond_spot_quote` | ä¸­å›½å¤–æ±‡äº¤æ˜“ä¸­å¿ƒ | åšå¸‚æŠ¥ä»·ã€ä¹°å–ä»·ã€æ”¶ç›Šç‡ | å®æ—¶ | é“¶è¡Œé—´æŠ¥ä»· |
| `bond_spot_deal` | ä¸­å›½å¤–æ±‡äº¤æ˜“ä¸­å¿ƒ | æˆäº¤å‡€ä»·ã€æ”¶ç›Šç‡ã€æ¶¨è·Œ | å®æ—¶ | é“¶è¡Œé—´æˆäº¤ |

#### D. æ”¶ç›Šç‡æ›²çº¿ç±»
| æ¥å£åç§° | æ•°æ®æº | æ ¸å¿ƒå­—æ®µ | æ›´æ–°é¢‘ç‡ | ç”¨é€” |
|---------|--------|---------|---------|------|
| `bond_china_yield` | ä¸­å€ºç½‘ | å„æœŸé™æ”¶ç›Šç‡ã€æ›²çº¿åç§° | æ—¥é¢‘ | æ”¶ç›Šç‡æ›²çº¿åˆ†æ |

#### E. å‘è¡Œä¿¡æ¯ç±»
| æ¥å£åç§° | æ•°æ®æº | æ ¸å¿ƒå­—æ®µ | æ›´æ–°é¢‘ç‡ | ç”¨é€” |
|---------|--------|---------|---------|------|
| `bond_debt_nafmii` | é“¶è¡Œé—´äº¤æ˜“å•†åä¼š | å€ºåˆ¸åç§°ã€å“ç§ã€é‡‘é¢ã€çŠ¶æ€ | å®æ—¶ | å‘è¡Œç›‘æ§ |

---

## ğŸ—„ï¸ äºŒã€ç°æœ‰æ•°æ®åº“é›†åˆåˆ†æ

### 2.1 å½“å‰é›†åˆæ¸…å•

```
ç°æœ‰é›†åˆï¼ˆ9ä¸ªï¼‰ï¼š
1. bond_basic_info - å€ºåˆ¸åŸºç¡€ä¿¡æ¯åˆ—è¡¨
2. bond_cb_list_jsl - é›†æ€å½•å¯è½¬å€ºåˆ—è¡¨
3. bond_cov_list - ä¸œè´¢å¯è½¬å€ºåˆ—è¡¨
4. bond_cash_summary - ä¸Šäº¤æ‰€ç°åˆ¸å¸‚åœºæ¦‚è§ˆ
5. bond_deal_summary - ä¸Šäº¤æ‰€æˆäº¤æ¦‚è§ˆ
6. bond_nafmii_debts - é“¶è¡Œé—´å€ºåŠ¡æ•°æ®
7. bond_spot_quotes - ç°è´§æŠ¥ä»·
8. bond_cb_profiles - å¯è½¬å€ºæ¡£æ¡ˆ
9. yield_curve_daily - æ”¶ç›Šç‡æ›²çº¿
```

### 2.2 ç¼ºå¤±çš„æ ¸å¿ƒé›†åˆ

```
åº”è¡¥å……çš„é›†åˆï¼ˆ8ä¸ªï¼‰ï¼š
1. bond_realtime_quotes - å®æ—¶è¡Œæƒ…æ•°æ®ï¼ˆæ²ªæ·±å€ºåˆ¸ï¼‰
2. bond_cov_realtime - å¯è½¬å€ºå®æ—¶è¡Œæƒ…
3. bond_cov_comparison - å¯è½¬å€ºæ¯”ä»·è¡¨
4. bond_cov_value_analysis - å¯è½¬å€ºä»·å€¼åˆ†æå†å²
5. bond_daily_history - å€ºåˆ¸æ—¥çº¿å†å²æ•°æ®
6. bond_cov_daily_history - å¯è½¬å€ºæ—¥çº¿å†å²æ•°æ®
7. bond_spot_deal - ç°åˆ¸å¸‚åœºæˆäº¤è¡Œæƒ…
8. bond_info_details - å€ºåˆ¸è¯¦ç»†ä¿¡æ¯
```

---

## ğŸ¯ ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆ

### 3.1 æ•°æ®æ¶æ„ä¼˜åŒ–

#### æ•°æ®å±‚æ¬¡ç»“æ„
```
Level 1: åŸºç¡€æ•°æ®å±‚
  â”œâ”€ bond_basic_info (å€ºåˆ¸åˆ—è¡¨)
  â”œâ”€ bond_info_details (è¯¦ç»†ä¿¡æ¯)
  â””â”€ bond_daily_history (å†å²Kçº¿)

Level 2: å¯è½¬å€ºä¸“é¡¹å±‚
  â”œâ”€ bond_cov_list (å¯è½¬å€ºåˆ—è¡¨)
  â”œâ”€ bond_cov_realtime (å®æ—¶è¡Œæƒ…)
  â”œâ”€ bond_cov_comparison (æ¯”ä»·è¡¨)
  â”œâ”€ bond_cov_value_analysis (ä»·å€¼åˆ†æ)
  â””â”€ bond_cov_daily_history (å†å²Kçº¿)

Level 3: å¸‚åœºæ•°æ®å±‚
  â”œâ”€ bond_realtime_quotes (å®æ—¶è¡Œæƒ…)
  â”œâ”€ bond_spot_quotes (åšå¸‚æŠ¥ä»·)
  â”œâ”€ bond_spot_deal (æˆäº¤è¡Œæƒ…)
  â”œâ”€ bond_cash_summary (ç°åˆ¸æ¦‚è§ˆ)
  â””â”€ bond_deal_summary (æˆäº¤æ¦‚è§ˆ)

Level 4: åˆ†ææ•°æ®å±‚
  â”œâ”€ yield_curve_daily (æ”¶ç›Šç‡æ›²çº¿)
  â””â”€ bond_nafmii_debts (å‘è¡Œæ•°æ®)
```

### 3.2 æ–°å¢æ•°æ®é›†åˆè®¾è®¡

#### 3.2.1 bond_realtime_quotes (å®æ—¶è¡Œæƒ…)
```python
{
    "code": "sh010107",
    "name": "21å›½å€ºâ‘º",
    "price": 100.010,
    "change": 0.00,
    "change_pct": 0.00,
    "bid": 100.000,
    "ask": 100.020,
    "prev_close": 100.010,
    "open": 100.000,
    "high": 100.020,
    "low": 100.000,
    "volume": 10390,
    "amount": 1063895,
    "timestamp": "2024-11-15 15:00:00",
    "category": "å›½å€º",
    "exchange": "SH"
}
```

#### 3.2.2 bond_cov_comparison (å¯è½¬å€ºæ¯”ä»·)
```python
{
    "code": "127105",
    "name": "é¾™æ˜Ÿè½¬å€º",
    "price": 145.688,
    "change_pct": 2.5,
    "stock_code": "002442",
    "stock_name": "é¾™æ˜ŸåŒ–å·¥",
    "stock_price": 8.50,
    "stock_change_pct": 1.2,
    "convert_price": 7.20,
    "convert_value": 118.06,
    "convert_premium_rate": 23.4,
    "pure_debt_value": 87.58,
    "pure_debt_premium_rate": 66.3,
    "put_trigger_price": 5.04,
    "redeem_trigger_price": 10.44,
    "maturity_redeem_price": 106.0,
    "start_convert_date": "2024-08-07",
    "list_date": "2024-03-06",
    "apply_date": "2024-02-01",
    "timestamp": "2024-11-15 15:00:00"
}
```

#### 3.2.3 bond_cov_value_analysis (å¯è½¬å€ºä»·å€¼)
```python
{
    "code": "113527",
    "name": "å¥½å®¢è½¬å€º",
    "date": "2024-11-15",
    "close_price": 122.183,
    "pure_debt_value": 112.44,
    "convert_value": 98.96,
    "pure_debt_premium_rate": 8.67,
    "convert_premium_rate": 23.46
}
```

### 3.3 æ•°æ®å±•ç¤ºä¼˜åŒ–

#### 3.3.1 å€ºåˆ¸åˆ—è¡¨é¡µå¢å¼º
```
æ–°å¢åŠŸèƒ½ï¼š
âœ… å®æ—¶ä»·æ ¼æ›´æ–°ï¼ˆWebSocketï¼‰
âœ… å¤šç»´åº¦ç­›é€‰ï¼ˆç±»åˆ«ã€äº¤æ˜“æ‰€ã€è¯„çº§ã€åˆ°æœŸæ—¥ï¼‰
âœ… è‡ªå®šä¹‰åˆ—æ˜¾ç¤º
âœ… é«˜çº§æ’åºï¼ˆå¤šå­—æ®µç»„åˆæ’åºï¼‰
âœ… æ•°æ®å¯¼å‡ºï¼ˆExcel/CSVï¼‰
âœ… æ”¶è—/å…³æ³¨åŠŸèƒ½
```

#### 3.3.2 å¯è½¬å€ºä¸“é¡¹é¡µé¢
```
ä¸“ä¸šåŠŸèƒ½ï¼š
âœ… å¯è½¬å€ºé›·è¾¾å›¾ï¼ˆè½¬è‚¡ä»·å€¼ã€æº¢ä»·ç‡ã€çº¯å€ºä»·å€¼ï¼‰
âœ… å¥—åˆ©æœºä¼šæ‰«æï¼ˆä½æº¢ä»·ã€å¼ºèµé¢„è­¦ï¼‰
âœ… è½¬è‚¡åˆ†æå·¥å…·
âœ… å†å²æº¢ä»·ç‡èµ°åŠ¿å›¾
âœ… æ­£è‚¡è”åŠ¨åˆ†æ
```

#### 3.3.3 å€ºåˆ¸è¯¦æƒ…é¡µä¼˜åŒ–
```
è¯¦æƒ…æ¨¡å—ï¼š
1. åŸºæœ¬ä¿¡æ¯å¡ç‰‡
   - å€ºåˆ¸ä»£ç ã€åç§°ã€ç±»å‹
   - å‘è¡Œäººã€ä¿¡ç”¨è¯„çº§
   - ç¥¨é¢åˆ©ç‡ã€åˆ°æœŸæ—¥
   
2. è¡Œæƒ…æ¨¡å—
   - å®æ—¶ä»·æ ¼å’Œæ¶¨è·Œ
   - Kçº¿å›¾ï¼ˆæ—¥çº¿/å‘¨çº¿/æœˆçº¿ï¼‰
   - æˆäº¤é‡åˆ†æ
   
3. å¯è½¬å€ºä¸“é¡¹ï¼ˆå¦‚é€‚ç”¨ï¼‰
   - è½¬è‚¡ä»·å€¼åˆ†æ
   - æº¢ä»·ç‡èµ°åŠ¿
   - å¼ºèµ/å›å”®æ¡æ¬¾
   
4. æ”¶ç›Šç‡åˆ†æ
   - åˆ°æœŸæ”¶ç›Šç‡
   - ä¹…æœŸå’Œå‡¸æ€§
   - æ”¶ç›Šç‡æ›²çº¿ä½ç½®
   
5. è´¢åŠ¡æŒ‡æ ‡ï¼ˆä¼ä¸šå€ºï¼‰
   - å‘è¡Œäººè´¢åŠ¡çŠ¶å†µ
   - å¿å€ºèƒ½åŠ›æŒ‡æ ‡
```

#### 3.3.4 å¸‚åœºæ•°æ®ä»ªè¡¨æ¿
```
ä»ªè¡¨æ¿ç»„ä»¶ï¼š
âœ… å¸‚åœºæ¦‚è§ˆï¼ˆæ€»æ‰˜ç®¡é‡ã€æˆäº¤é¢ï¼‰
âœ… åˆ†ç±»ç»Ÿè®¡ï¼ˆå›½å€ºã€ä¼ä¸šå€ºã€å¯è½¬å€ºï¼‰
âœ… æ”¶ç›Šç‡æ›²çº¿å®æ—¶å›¾
âœ… æˆäº¤æ´»è·ƒæ¦œï¼ˆTOP 20ï¼‰
âœ… æ¶¨è·Œå¹…æ’è¡Œ
âœ… å¼‚åŠ¨ç›‘æ§ï¼ˆä»·æ ¼/æˆäº¤é‡ï¼‰
```

---

## ğŸ› ï¸ å››ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 4.1 åç«¯ä¼˜åŒ–

#### æ–°å¢Provideræ–¹æ³•
```python
class AKShareBondProvider:
    # å·²æœ‰æ–¹æ³•
    async def get_symbol_list()
    async def get_basic_info()
    async def get_historical_data()
    async def get_realtime_quote()
    async def get_yield_curve()
    
    # æ–°å¢æ–¹æ³•
    async def get_realtime_quotes_batch()  # æ‰¹é‡å®æ—¶è¡Œæƒ…
    async def get_cov_comparison()  # å¯è½¬å€ºæ¯”ä»·
    async def get_cov_value_analysis()  # å¯è½¬å€ºä»·å€¼åˆ†æ
    async def get_spot_quote()  # ç°åˆ¸åšå¸‚æŠ¥ä»·
    async def get_spot_deal()  # ç°åˆ¸æˆäº¤è¡Œæƒ…
    async def get_cash_summary()  # ç°åˆ¸å¸‚åœºæ¦‚è§ˆ
    async def get_deal_summary()  # æˆäº¤æ¦‚è§ˆ
    async def get_nafmii_debts()  # é“¶è¡Œé—´å€ºåŠ¡
```

#### æ–°å¢Serviceæ–¹æ³•
```python
class BondDataService:
    # æ•°æ®ä¿å­˜
    async def save_realtime_quotes()
    async def save_cov_comparison()
    async def save_cov_value_analysis()
    
    # æ•°æ®æŸ¥è¯¢
    async def query_realtime_quotes()
    async def query_cov_comparison()
    async def get_cov_analysis_chart_data()
    
    # æ•°æ®åˆ†æ
    async def calculate_bond_metrics()  # è®¡ç®—ä¹…æœŸã€å‡¸æ€§ç­‰
    async def scan_arbitrage_opportunities()  # å¥—åˆ©æ‰«æ
```

#### æ–°å¢APIè·¯ç”±
```python
# å®æ—¶è¡Œæƒ…
GET /api/bonds/realtime
GET /api/bonds/{code}/realtime

# å¯è½¬å€ºä¸“é¡¹
GET /api/bonds/convertible/comparison
GET /api/bonds/convertible/{code}/value-analysis
GET /api/bonds/convertible/arbitrage-scan

# å¸‚åœºæ•°æ®
GET /api/bonds/market/overview
GET /api/bonds/market/spot-quotes
GET /api/bonds/market/spot-deals

# æ•°æ®åˆ†æ
GET /api/bonds/{code}/metrics
GET /api/bonds/{code}/chart-data
```

### 4.2 å‰ç«¯ä¼˜åŒ–

#### æ–°å¢é¡µé¢ç»„ä»¶
```
1. BondMarketDashboard.vue - å¸‚åœºæ•°æ®ä»ªè¡¨æ¿
2. ConvertibleBondPanel.vue - å¯è½¬å€ºä¸“é¡¹é¢æ¿
3. BondDetailEnhanced.vue - å¢å¼ºç‰ˆå€ºåˆ¸è¯¦æƒ…
4. BondComparisonTool.vue - å€ºåˆ¸å¯¹æ¯”å·¥å…·
5. YieldCurveChart.vue - æ”¶ç›Šç‡æ›²çº¿å›¾è¡¨
6. ConvertibleArbitrageScanner.vue - å¯è½¬å€ºå¥—åˆ©æ‰«æ
```

#### UI/UXä¼˜åŒ–
```
âœ… ä¸“ä¸šçš„é…è‰²æ–¹æ¡ˆï¼ˆé‡‘èæ•°æ®å¯è§†åŒ–ï¼‰
âœ… å“åº”å¼å¸ƒå±€ï¼ˆæ”¯æŒç§»åŠ¨ç«¯ï¼‰
âœ… æ·±è‰²æ¨¡å¼æ”¯æŒ
âœ… æ•°æ®åŠ è½½éª¨æ¶å±
âœ… é”™è¯¯è¾¹ç•Œå¤„ç†
âœ… æ€§èƒ½ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ï¼‰
```

### 4.3 æ•°æ®æ›´æ–°ç­–ç•¥

#### æ›´æ–°é¢‘ç‡è§„åˆ’
```
å®æ—¶æ•°æ®ï¼ˆæ¯5-10ç§’ï¼‰:
  - bond_realtime_quotes
  - bond_cov_realtime
  - bond_spot_deal

åˆ†é’Ÿçº§ï¼ˆæ¯åˆ†é’Ÿï¼‰:
  - bond_spot_quotes
  
å°æ—¶çº§ï¼ˆæ¯å°æ—¶ï¼‰:
  - bond_cov_comparison
  
æ—¥çº§ï¼ˆæ¯æ—¥æ”¶ç›˜åï¼‰:
  - bond_basic_info
  - bond_daily_history
  - bond_cov_daily_history
  - yield_curve_daily
  - bond_cash_summary
  - bond_deal_summary
  
å‘¨çº§ï¼ˆæ¯å‘¨ä¸€æ¬¡ï¼‰:
  - bond_info_details
  - bond_nafmii_debts
```

---

## ğŸ“ˆ äº”ã€ä¸“ä¸šæŒ‡æ ‡è®¡ç®—

### 5.1 å€ºåˆ¸åŸºç¡€æŒ‡æ ‡
```python
def calculate_ytm(price, coupon, face_value, years_to_maturity):
    """åˆ°æœŸæ”¶ç›Šç‡"""
    
def calculate_duration(cash_flows, ytm):
    """ä¹…æœŸ"""
    
def calculate_convexity(cash_flows, ytm):
    """å‡¸æ€§"""
    
def calculate_dv01(price, duration):
    """DV01ï¼ˆä»·æ ¼æ•æ„Ÿåº¦ï¼‰"""
```

### 5.2 å¯è½¬å€ºä¸“é¡¹æŒ‡æ ‡
```python
def calculate_convert_value(stock_price, convert_price, face_value):
    """è½¬è‚¡ä»·å€¼"""
    
def calculate_convert_premium(bond_price, convert_value):
    """è½¬è‚¡æº¢ä»·ç‡"""
    
def calculate_pure_debt_value(coupon, ytm, years):
    """çº¯å€ºä»·å€¼"""
    
def calculate_pure_debt_premium(bond_price, pure_debt_value):
    """çº¯å€ºæº¢ä»·ç‡"""
    
def check_redeem_trigger(stock_price, convert_price, redeem_trigger_ratio):
    """å¼ºèµè§¦å‘æ£€æµ‹"""
```

---

## ğŸ¨ å…­ã€å¯è§†åŒ–è®¾è®¡

### 6.1 æ ¸å¿ƒå›¾è¡¨ç»„ä»¶
```
1. Kçº¿å›¾ - TradingViewé£æ ¼ï¼Œæ”¯æŒæŠ€æœ¯æŒ‡æ ‡
2. æ”¶ç›Šç‡æ›²çº¿ - å¤šæ›²çº¿å¯¹æ¯”ï¼Œå†å²å›æ”¾
3. æº¢ä»·ç‡èµ°åŠ¿ - åŒè½´å›¾ï¼ˆè½¬è‚¡æº¢ä»·+çº¯å€ºæº¢ä»·ï¼‰
4. é›·è¾¾å›¾ - å¯è½¬å€ºå¤šç»´åº¦è¯„åˆ†
5. çƒ­åŠ›å›¾ - å¸‚åœºæˆäº¤åˆ†å¸ƒ
6. æ¡‘åŸºå›¾ - èµ„é‡‘æµå‘åˆ†æ
```

### 6.2 æ•°æ®å±•ç¤ºä¼˜åŒ–
```
âœ… æ•°æ®å¡ç‰‡ - å…³é”®æŒ‡æ ‡çªå‡ºæ˜¾ç¤º
âœ… è¿›åº¦æ¡ - åˆ°æœŸè¿›åº¦å¯è§†åŒ–
âœ… æ ‡ç­¾ç³»ç»Ÿ - å€ºåˆ¸åˆ†ç±»æ ‡ç­¾
âœ… é¢œè‰²ç¼–ç  - æ¶¨è·Œç”¨çº¢ç»¿æ ‡è¯†
âœ… è¶‹åŠ¿æŒ‡ç¤ºå™¨ - ç®­å¤´+ç™¾åˆ†æ¯”
```

---

## ğŸš€ ä¸ƒã€å®æ–½è®¡åˆ’

### Phase 1: æ•°æ®åŸºç¡€ï¼ˆ1-2å‘¨ï¼‰
- [ ] è¡¥å……ç¼ºå¤±çš„æ•°æ®é›†åˆ
- [ ] ä¼˜åŒ–æ•°æ®å­˜å‚¨ç»“æ„
- [ ] å®Œå–„ç´¢å¼•å’ŒæŸ¥è¯¢æ€§èƒ½
- [ ] å®ç°æ•°æ®è‡ªåŠ¨æ›´æ–°

### Phase 2: åç«¯å¢å¼ºï¼ˆ2-3å‘¨ï¼‰
- [ ] æ–°å¢APIæ¥å£
- [ ] å®ç°ä¸“ä¸šæŒ‡æ ‡è®¡ç®—
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶
- [ ] å®æ—¶æ•°æ®æ¨é€ï¼ˆWebSocketï¼‰

### Phase 3: å‰ç«¯ä¼˜åŒ–ï¼ˆ3-4å‘¨ï¼‰
- [ ] å€ºåˆ¸åˆ—è¡¨é¡µé¢å¢å¼º
- [ ] å¯è½¬å€ºä¸“é¡¹é¡µé¢
- [ ] å€ºåˆ¸è¯¦æƒ…é¡µä¼˜åŒ–
- [ ] å¸‚åœºæ•°æ®ä»ªè¡¨æ¿
- [ ] å›¾è¡¨ç»„ä»¶å¼€å‘

### Phase 4: é«˜çº§åŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰
- [ ] å¥—åˆ©æ‰«æå·¥å…·
- [ ] å€ºåˆ¸å¯¹æ¯”å·¥å…·
- [ ] æ”¶è—å’Œæé†’åŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½

### Phase 5: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

---

## ğŸ“ å…«ã€æ ¸å¿ƒä»£ç ç¤ºä¾‹

### 8.1 å¯è½¬å€ºä»·å€¼åˆ†æ
```python
async def analyze_convertible_bond(self, code: str) -> Dict:
    """å¯è½¬å€ºç»¼åˆåˆ†æ"""
    
    # 1. è·å–åŸºç¡€æ•°æ®
    bond_info = await self.get_bond_info(code)
    comparison = await self.get_cov_comparison(code)
    
    # 2. è®¡ç®—æŒ‡æ ‡
    convert_value = self.calculate_convert_value(
        comparison['stock_price'],
        comparison['convert_price'],
        bond_info['face_value']
    )
    
    convert_premium = self.calculate_convert_premium(
        comparison['price'],
        convert_value
    )
    
    # 3. è¯„çº§
    rating = self.rate_convertible_bond({
        'convert_premium': convert_premium,
        'pure_debt_premium': comparison['pure_debt_premium'],
        'ytm': bond_info['ytm'],
        'credit_rating': bond_info['credit_rating']
    })
    
    return {
        'code': code,
        'convert_value': convert_value,
        'convert_premium': convert_premium,
        'rating': rating,
        'recommend': self.generate_recommendation(rating)
    }
```

### 8.2 å¥—åˆ©æœºä¼šæ‰«æ
```python
async def scan_arbitrage_opportunities(self) -> List[Dict]:
    """æ‰«æå¯è½¬å€ºå¥—åˆ©æœºä¼š"""
    
    # è·å–æ‰€æœ‰å¯è½¬å€º
    bonds = await self.query_cov_comparison()
    
    opportunities = []
    for bond in bonds:
        # ä½æº¢ä»·æœºä¼š
        if bond['convert_premium'] < 5:
            opportunities.append({
                'code': bond['code'],
                'type': 'low_premium',
                'convert_premium': bond['convert_premium'],
                'profit_potential': 100 - bond['convert_premium']
            })
        
        # å¼ºèµé¢„è­¦
        if bond['stock_price'] >= bond['redeem_trigger_price']:
            opportunities.append({
                'code': bond['code'],
                'type': 'redeem_alert',
                'days_to_trigger': self.calculate_days_to_trigger(bond)
            })
    
    return sorted(opportunities, key=lambda x: x.get('profit_potential', 0), reverse=True)
```

---

## ğŸ¯ ä¹ã€é¢„æœŸæ•ˆæœ

### 9.1 æ•°æ®å®Œæ•´æ€§
- âœ… è¦†ç›–å€ºåˆ¸å…¨ç”Ÿå‘½å‘¨æœŸæ•°æ®
- âœ… å®æ—¶è¡Œæƒ…æ›´æ–°
- âœ… å†å²æ•°æ®å®Œæ•´

### 9.2 ä¸“ä¸šæ€§æå‡
- âœ… ä¸“ä¸šé‡‘èæŒ‡æ ‡è®¡ç®—
- âœ… å¤šç»´åº¦æ•°æ®åˆ†æ
- âœ… æ™ºèƒ½å¥—åˆ©å‘ç°

### 9.3 ç”¨æˆ·ä½“éªŒ
- âœ… ç•Œé¢ç¾è§‚ä¸“ä¸š
- âœ… æ“ä½œæµç•…é«˜æ•ˆ
- âœ… æ•°æ®å‡†ç¡®åŠæ—¶

---

## ğŸ“š åã€å‚è€ƒèµ„æ–™

1. AKShareæ–‡æ¡£: https://akshare.akfamily.xyz/
2. ä¸­å€ºç½‘: https://www.chinabond.com.cn/
3. ä¸­å›½å¤–æ±‡äº¤æ˜“ä¸­å¿ƒ: https://www.chinamoney.com.cn/
4. ä¸Šäº¤æ‰€å€ºåˆ¸ä¿¡æ¯ç½‘: http://bond.sse.com.cn/
5. é›†æ€å½•: https://www.jisilu.cn/data/cbnew/
